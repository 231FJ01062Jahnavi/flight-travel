<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Indian Flight Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f3e8ff;
      font-family: "Poppins", sans-serif;
      color: #4b0082;
    }
    .container {
      max-width: 600px;
      margin-top: 60px;
      background-color: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    .btn-purple {
      background-color: #6a0dad;
      color: white;
      border-radius: 0;
    }
    .btn-purple:hover {
      background-color: #52088e;
    }
    .btn-outline-purple {
      border: 2px solid #6a0dad;
      color: #6a0dad;
      border-radius: 0;
    }
    .btn-outline-purple.active, .btn-outline-purple:hover {
      background-color: #6a0dad;
      color: white;
    }
    .quote-box, .ticket-box {
      display: none;
      background: #f8f2ff;
      padding: 20px;
      border: 2px solid #6a0dad;
      border-radius: 10px;
      margin-top: 20px;
    }
    .ticket-box h3 {
      border-bottom: 2px solid #6a0dad;
      padding-bottom: 8px;
    }
  </style>
</head>
<body>

<div class="container text-center">
  <h2 class="mb-4">The Indian Flight Booking</h2>

  <!-- Booking Form -->
  <div id="bookingForm">
    <div class="mb-3">
      <label class="form-label">Passenger Name</label>
      <input type="text" id="passengerName" class="form-control" placeholder="Enter your full name">
    </div>
    <div class="mb-3">
      <label class="form-label">Contact Number</label>
      <input type="tel" id="contactNumber" class="form-control" placeholder="Enter your phone number">
    </div>
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" id="email" class="form-control" placeholder="Enter your email address">
    </div>
    <div class="mb-3">
      <label class="form-label">Source</label>
      <input type="text" id="source" class="form-control" placeholder="Enter source city">
    </div>
    <div class="mb-3">
      <label class="form-label">Destination</label>
      <input type="text" id="destination" class="form-control" placeholder="Enter destination city">
    </div>
    <div class="mb-3">
      <label class="form-label">Date of Travel</label>
      <input type="date" id="travelDate" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Departure Time</label>
      <input type="time" id="travelTime" class="form-control">
    </div>

    <!-- Flight Class Buttons -->
    <div class="mb-3">
      <label class="form-label">Select Class</label><br>
      <button type="button" class="btn btn-outline-purple me-2" id="economyBtn">Economy</button>
      <button type="button" class="btn btn-outline-purple" id="businessBtn">Business</button>
    </div>

    <button class="btn btn-purple w-100 mb-3" id="quoteBtn">Search & Quote</button>
    <button class="btn btn-purple w-100" id="bookBtn" disabled>Book Now</button>
  </div>

  <!-- Quote Section -->
  <div class="quote-box" id="quoteBox">
    <h5>Flight Quote</h5>
    <p><strong>Flight Number:</strong> <span id="quoteFlight"></span></p>
    <p><strong>Cost:</strong> ₹<span id="quoteCost"></span></p>
  </div>

  <!-- Ticket Section -->
  <div class="ticket-box text-start" id="ticketBox">
    <h3>The Indian Flight Ticket</h3>
    <p><strong>Passenger Name:</strong> <span id="ticketPassenger"></span></p>
    <p><strong>Contact:</strong> <span id="ticketContact"></span></p>
    <p><strong>Email:</strong> <span id="ticketEmail"></span></p>
    <p><strong>Flight Number:</strong> <span id="ticketFlight"></span></p>
    <p><strong>From:</strong> <span id="ticketSource"></span></p>
    <p><strong>To:</strong> <span id="ticketDestination"></span></p>
    <p><strong>Class:</strong> <span id="ticketClass"></span></p>
    <p><strong>Date:</strong> <span id="ticketDate"></span></p>
    <p><strong>Departure Time:</strong> <span id="ticketTime"></span></p>
    <p><strong>Cost:</strong> ₹<span id="ticketCost"></span></p>
    <button class="btn btn-purple w-100 mt-3" onclick="window.print()">Print Ticket</button>
    <button class="btn btn-purple w-100 mt-3" id="clearTicket">Clear Ticket</button>
  </div>
</div>

<script>
  const quoteBtn = document.getElementById('quoteBtn');
  const bookBtn = document.getElementById('bookBtn');
  const quoteBox = document.getElementById('quoteBox');
  const ticketBox = document.getElementById('ticketBox');
  const clearTicket = document.getElementById('clearTicket');
  const bookingForm = document.getElementById('bookingForm');

  const economyBtn = document.getElementById('economyBtn');
  const businessBtn = document.getElementById('businessBtn');

  let selectedClass = null;
  let currentFlight = null;

  // Load existing ticket from localStorage
  window.onload = function() {
    const savedTicket = localStorage.getItem('savedTicket');
    if (savedTicket) {
      const data = JSON.parse(savedTicket);
      showTicket(data);
    }
  };

  // Handle class selection
  economyBtn.addEventListener('click', () => {
    selectedClass = "economy";
    economyBtn.classList.add("active");
    businessBtn.classList.remove("active");
  });

  businessBtn.addEventListener('click', () => {
    selectedClass = "business";
    businessBtn.classList.add("active");
    economyBtn.classList.remove("active");
  });

  function randomFlightNumber() {
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const code = letters[Math.floor(Math.random() * 26)] + letters[Math.floor(Math.random() * 26)];
    const number = Math.floor(100 + Math.random() * 900);
    return code + "-" + number;
  }

  function randomCost(cls) {
    return cls === "business"
      ? Math.floor(7000 + Math.random() * 3000)
      : Math.floor(3000 + Math.random() * 2000);
  }

  // Quote
  quoteBtn.addEventListener('click', () => {
    const passenger = document.getElementById('passengerName').value.trim();
    const contact = document.getElementById('contactNumber').value.trim();
    const email = document.getElementById('email').value.trim();
    const source = document.getElementById('source').value.trim();
    const destination = document.getElementById('destination').value.trim();
    const date = document.getElementById('travelDate').value;
    const time = document.getElementById('travelTime').value;

    if (!passenger || !contact || !email || !source || !destination || !date || !time || !selectedClass) {
      alert("Please fill in all fields and select a class.");
      return;
    }
    if (source.toLowerCase() === destination.toLowerCase()) {
      alert("Source and destination cannot be the same!");
      return;
    }

    const flightNumber = randomFlightNumber();
    const cost = randomCost(selectedClass);

    document.getElementById('quoteFlight').textContent = flightNumber;
    document.getElementById('quoteCost').textContent = cost;

    quoteBox.style.display = "block";
    bookBtn.disabled = false;

    currentFlight = { passenger, contact, email, source, destination, date, time, flightClass: selectedClass, flightNumber, cost };
  });

  // Book
  bookBtn.addEventListener('click', () => {
    if (!currentFlight) {
      alert("Please get a flight quote first!");
      return;
    }

    localStorage.setItem('savedTicket', JSON.stringify(currentFlight));
    showTicket(currentFlight);
  });

  // Show ticket
  function showTicket(data) {
    document.getElementById('ticketPassenger').textContent = data.passenger;
    document.getElementById('ticketContact').textContent = data.contact;
    document.getElementById('ticketEmail').textContent = data.email;
    document.getElementById('ticketFlight').textContent = data.flightNumber;
    document.getElementById('ticketSource').textContent = data.source;
    document.getElementById('ticketDestination').textContent = data.destination;
    document.getElementById('ticketClass').textContent = data.flightClass.charAt(0).toUpperCase() + data.flightClass.slice(1);
    document.getElementById('ticketDate').textContent = data.date;
    document.getElementById('ticketTime').textContent = data.time;
    document.getElementById('ticketCost').textContent = data.cost;

    ticketBox.style.display = "block";
    bookingForm.style.display = "none";
    quoteBox.style.display = "none";
  }

  // Clear
  clearTicket.addEventListener('click', () => {
    localStorage.removeItem('savedTicket');
    location.reload();
  });
</script>

</body>
</html>
